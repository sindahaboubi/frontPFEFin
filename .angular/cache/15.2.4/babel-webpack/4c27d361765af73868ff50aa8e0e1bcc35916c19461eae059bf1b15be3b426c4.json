{"ast":null,"code":"import { __values } from \"tslib\";\nimport { ToastrService } from 'ngx-toastr';\nimport { RoleService } from 'src/app/service/role.service';\nimport Swal from 'sweetalert2';\nimport { ProjetKeyComponent } from '../dialogs/projet-key/projet-key.component';\nimport { MatDialog } from '@angular/material/dialog';\nimport { MembreService } from 'src/app/service/membre.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"ngx-toastr\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"src/app/service/role.service\";\nimport * as i4 from \"src/app/service/membre.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/tabs\";\nimport * as i7 from \"@angular/material/icon\";\nimport * as i8 from \"@angular/material/list\";\nimport * as i9 from \"@angular/material/button\";\nfunction SelectProjetMembreComponent_mat_list_item_6_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-list-item\", 9)(1, \"mat-icon\", 10);\n    i0.ɵɵtext(2, \"folder\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 11);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementStart(5, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function SelectProjetMembreComponent_mat_list_item_6_Template_button_click_5_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r5);\n      var i_r3 = restoredCtx.index;\n      var ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.gerer(i_r3));\n    });\n    i0.ɵɵelementStart(6, \"mat-icon\");\n    i0.ɵɵtext(7, \"settings\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"div\", 13);\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"date\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    var projet_r2 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", projet_r2.nom, \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(10, 2, projet_r2.dateDebut), \" \");\n  }\n}\nfunction SelectProjetMembreComponent_li_9_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 15);\n    i0.ɵɵtext(1, \"equipe de developpement\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SelectProjetMembreComponent_li_9_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 15);\n    i0.ɵɵtext(1, \"Scrum master\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SelectProjetMembreComponent_li_9_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 15);\n    i0.ɵɵtext(1, \"Product owner\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SelectProjetMembreComponent_li_9_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 14)(1, \"div\");\n    i0.ɵɵtext(2, \" vous \\u00CAtes inviter \\u00E0 rejoindre le projet \");\n    i0.ɵɵelementStart(3, \"span\", 15);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\");\n    i0.ɵɵtext(6, \" vous aurez le role \");\n    i0.ɵɵtemplate(7, SelectProjetMembreComponent_li_9_span_7_Template, 2, 0, \"span\", 16);\n    i0.ɵɵtemplate(8, SelectProjetMembreComponent_li_9_span_8_Template, 2, 0, \"span\", 16);\n    i0.ɵɵtemplate(9, SelectProjetMembreComponent_li_9_span_9_Template, 2, 0, \"span\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(10, \"br\");\n    i0.ɵɵelementStart(11, \"div\", 17)(12, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function SelectProjetMembreComponent_li_9_Template_button_click_12_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r11);\n      var role_r6 = restoredCtx.$implicit;\n      var ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.accepter(role_r6));\n    });\n    i0.ɵɵtext(13, \"Accepter\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function SelectProjetMembreComponent_li_9_Template_button_click_14_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r11);\n      var role_r6 = restoredCtx.$implicit;\n      var ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.refuser(role_r6));\n    });\n    i0.ɵɵtext(15, \"Refuser\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(16, \"hr\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    var role_r6 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(role_r6.projet.nom);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", role_r6.type == \"dev team\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", role_r6.type == \"scrum master\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", role_r6.type == \"po\");\n  }\n}\nvar SelectProjetMembreComponent = /** @class */function () {\n  function SelectProjetMembreComponent(toastr, keyMatDialogue, roleService, membreService) {\n    this.toastr = toastr;\n    this.keyMatDialogue = keyMatDialogue;\n    this.roleService = roleService;\n    this.membreService = membreService;\n    this.projets = [];\n  }\n  SelectProjetMembreComponent.prototype.ngOnInit = function () {\n    var _this = this;\n    // const membre = JSON.parse(localStorage.getItem('membre'))\n    this.roleService.afficherListRoleParMembre(this.membreService.getMembreFromToken().id).subscribe(function (data) {\n      var e_1, _a;\n      _this.roles = data.filter(function (role) {\n        return _this.verifDate(role.invitation.dateExpiration);\n      });\n      try {\n        for (var data_1 = __values(data), data_1_1 = data_1.next(); !data_1_1.done; data_1_1 = data_1.next()) {\n          var role = data_1_1.value;\n          if (role.status == \"ACCEPTE\") _this.projets.push(role.projet);\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (data_1_1 && !data_1_1.done && (_a = data_1.return)) _a.call(data_1);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n    });\n  };\n  SelectProjetMembreComponent.prototype.gerer = function (index) {\n    var dialogRef = this.keyMatDialogue.open(ProjetKeyComponent, {\n      width: '50%',\n      height: '25%',\n      data: {\n        projet: this.projets[index]\n      }\n    });\n  };\n  SelectProjetMembreComponent.prototype.verifDate = function (dateRec) {\n    var aujourdhui = new Date();\n    dateRec = new Date(dateRec);\n    console.log(dateRec > aujourdhui);\n    return dateRec > aujourdhui;\n  };\n  SelectProjetMembreComponent.prototype.accepter = function (role) {\n    var _this = this;\n    role.status = \"ACCEPTE\";\n    this.roleService.modifierRole(role).subscribe(function (data) {\n      console.log(data);\n      _this.roles.splice(_this.roles.indexOf(role), 1);\n      _this.toastr.success(\"vous avez accepté l'invitation\");\n      _this.projets.push(_this.roles.find(function (role) {\n        return role.pk.membreId == data.pk.membreId && role.pk.projetId == data.pk.projetId;\n      }).projet);\n    });\n  };\n  SelectProjetMembreComponent.prototype.refuser = function (role) {\n    var _this = this;\n    Swal.fire({\n      title: \"Vous êtes sûr de refuser l'invitation\",\n      icon: 'info',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Oui',\n      cancelButtonText: 'Annuler',\n      background: 'rgba(0,0,0,0.9)',\n      backdrop: 'rgba(0,0,0,0.4)',\n      allowOutsideClick: false,\n      allowEscapeKey: false,\n      allowEnterKey: false,\n      focusConfirm: false\n    }).then(function (result) {\n      if (result.isConfirmed) {\n        _this.roleService.supprimerRole(role.pk, role.invitation.chefProjetId).subscribe(function (data) {\n          Swal.fire('Refus', 'Vous avez rejeté l offre', 'warning');\n          _this.roles.splice(_this.roles.indexOf(role), 1);\n        });\n      }\n    });\n  };\n  SelectProjetMembreComponent.ɵfac = function SelectProjetMembreComponent_Factory(t) {\n    return new (t || SelectProjetMembreComponent)(i0.ɵɵdirectiveInject(i1.ToastrService), i0.ɵɵdirectiveInject(i2.MatDialog), i0.ɵɵdirectiveInject(i3.RoleService), i0.ɵɵdirectiveInject(i4.MembreService));\n  };\n  SelectProjetMembreComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SelectProjetMembreComponent,\n    selectors: [[\"app-select-projet-membre\"]],\n    decls: 10,\n    vars: 2,\n    consts: [[1, \"content\"], [1, \"card\", \"col-lg-6\", \"mx-auto\", 2, \"margin-top\", \"5%\"], [1, \"card-body\"], [\"label\", \"Projets\"], [1, \"my-list\"], [\"class\", \"projet\", 4, \"ngFor\", \"ngForOf\"], [\"label\", \"Invitations\"], [1, \"dropdown-menu-right\", \"dropdown-navbar\"], [\"class\", \" nav-link\", 4, \"ngFor\", \"ngForOf\"], [1, \"projet\"], [\"matListItemIcon\", \"\", 2, \"color\", \"rgb(238, 238, 238)\"], [\"matListItemTitle\", \"\", 2, \"color\", \"rgb(238, 238, 238)\"], [\"mat-mini-fab\", \"\", \"color\", \"warn\", \"aria-label\", \"Example icon button with a filter list icon\", 1, \"pull-right\", 3, \"click\"], [\"matListItemLine\", \"\", 1, \"d-flex\", 2, \"color\", \"rgb(238, 238, 238)\"], [1, \"nav-link\"], [1, \"text-primary\"], [\"class\", \"text-primary\", 4, \"ngIf\"], [1, \"d-flex\", \"justify-content-center\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"h-25\", \"w-25\", 2, \"margin-right\", \"1%\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"accent\", 1, \"h-25\", \"w-25\", 3, \"click\"]],\n    template: function SelectProjetMembreComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"mat-tab-group\")(4, \"mat-tab\", 3)(5, \"mat-list\", 4);\n        i0.ɵɵtemplate(6, SelectProjetMembreComponent_mat_list_item_6_Template, 11, 4, \"mat-list-item\", 5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"mat-tab\", 6)(8, \"ul\", 7);\n        i0.ɵɵtemplate(9, SelectProjetMembreComponent_li_9_Template, 17, 4, \"li\", 8);\n        i0.ɵɵelementEnd()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", ctx.projets);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.roles);\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i6.MatTab, i6.MatTabGroup, i7.MatIcon, i8.MatList, i8.MatListItem, i8.MatListItemIcon, i8.MatListItemLine, i8.MatListItemTitle, i9.MatButton, i9.MatMiniFabButton, i5.DatePipe],\n    styles: [\"@charset \\\"UTF-8\\\";\\n.mat-mdc-list-item-icon[_ngcontent-%COMP%] {\\n  color: rgba(3, 28, 171, 0.54);\\n}\\n\\n.my-list[_ngcontent-%COMP%] {\\n  height: 400px; \\n  overflow-y: auto; \\n}\\n\\n[_ngcontent-%COMP%]::-webkit-scrollbar {\\n  width: 5px;\\n}\\n\\n\\n[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\\n  background-color: #969696;\\n  border-radius: 5px;\\n  border: 2px solid #fff;\\n}\\n\\n\\n[_ngcontent-%COMP%]::-webkit-scrollbar-track {\\n  background-color: #413fc5;\\n}\\n\\n\\n[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\\n  background-color: #bbb;\\n}\\n\\n\\n[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:active {\\n  background-color: #999;\\n}\\n\\n.projet[_ngcontent-%COMP%]:hover {\\n  cursor: pointer;\\n  opacity: 0.5;\\n  transition: all;\\n}\\n\\n.mat-mdc-radio-button[_ngcontent-%COMP%]    ~ .mat-mdc-radio-button[_ngcontent-%COMP%] {\\n  margin-left: 16px;\\n}\\n\\nform[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\nmat-form-field[_ngcontent-%COMP%] {\\n  width: 100%;\\n  margin-bottom: 20px;\\n}\\n\\ntextarea[matInput][_ngcontent-%COMP%] {\\n  height: 150px;\\n}\\n\\nbutton[type=submit][_ngcontent-%COMP%], button[type=button][_ngcontent-%COMP%] {\\n  margin-top: 20px;\\n}\\n\\nmat-form-field[_ngcontent-%COMP%]    + mat-form-field[_ngcontent-%COMP%] {\\n  margin-left: 20px;\\n}\\n\\n.date-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n}\\n\\n.mat-mdc-form-field[_ngcontent-%COMP%]    + .mat-mdc-form-field[_ngcontent-%COMP%] {\\n  margin-left: 8px;\\n}\\n\\n.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%] {\\n  justify-content: space-between;\\n  align-items: center;\\n}\\n\\n.scrollable-cell[_ngcontent-%COMP%] {\\n  max-width: 100%;\\n  white-space: nowrap;\\n  overflow-x: auto;\\n}\\n\\n.example-full-width[_ngcontent-%COMP%] {\\n  width: 100%;\\n}\"]\n  });\n  return SelectProjetMembreComponent;\n}();\nexport { SelectProjetMembreComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}